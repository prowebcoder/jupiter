<style>
  .counter-cards-wrapper {
    font-family: Arial, Helvetica, sans-serif;
    background: linear-gradient(120deg, rgba(215,217,211,1) 0%, rgba(154,6,112,1) 99%);
    padding: 50px 0;
    text-align: center;
  }

  .counter-row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }

  .counter-column {
    flex: 1 1 200px;
    max-width: 25%;
    padding: 10px;
  }

  .counter-card {
    padding: 20px;
    border-radius: 8px;
    color: white;
    box-shadow: 0 4px 8px rgba(0,0,0,0.4);
  }

  .counter-card .fa {
    font-size: 60px;
    margin-bottom: 10px;
  }

  @media screen and (max-width: 768px) {
    .counter-column {
      max-width: 50%;
    }
  }

  @media screen and (max-width: 480px) {
    .counter-column {
      max-width: 100%;
    }
  }
</style>

<div class="counter-cards-wrapper">
  <div class="counter-row">
    {% for block in section.blocks %}
      <div class="counter-column">
        <div class="counter-card" style="background: {{ block.settings.background }};">
         <span class="counter-emoji" style="color: {{ block.settings.emoji_color }};">{{ block.settings.emoji }}</span>
          <h3 id="counter{{ forloop.index }}" class="counter">0 +</h3>
          <p>{{ block.settings.title }}</p>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
  function startCounting(id, end, interval = 50) {
    let current = 0;
    const element = document.getElementById(id);
    const timer = setInterval(() => {
      element.textContent = current + " +";
      current++;
      if (current > end) clearInterval(timer);
    }, interval);
  }

  document.addEventListener("DOMContentLoaded", function () {
    {% for block in section.blocks %}
      startCounting("counter{{ forloop.index }}", {{ block.settings.end_value }});
    {% endfor %}
  });
</script>

{% schema %}
{
  "name": "Counter Cards",
  "max_blocks": 4,
  "blocks": [
    {
      "type": "card",
      "name": "Counter Card",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Partners"
        },
        {
          "type": "number",
          "id": "end_value",
          "label": "Counter End Value",
          "default": 100
        },
        {
          "type": "text",
          "id": "emoji",
          "label": "Emoji",
          "default": "ü§ù"
        },
        {
          "type": "color",
          "id": "emoji_color",
          "label": "Icon Color",
          "default": "#6495ed"
        },
        {
          "type": "color_background",
          "id": "background",
          "label": "Card Background Gradient",
          "default": "linear-gradient(313deg, rgba(2,0,36,1) 82%, rgba(2,165,224,1) 100%)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Pwc Counter Cards",
      "blocks": [
        { "type": "card" },
        { "type": "card" },
        { "type": "card" },
        { "type": "card" }
      ]
    }
  ]
}
{% endschema %}