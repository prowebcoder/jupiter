{%- style -%}
  .newsletter-{{ section.id }} {
    background-color: {{ section.settings.background_color }};
    color: {{ section.settings.text_color }};
    padding: {{ section.settings.padding_top }}px {{ section.settings.padding_right }}px {{ section.settings.padding_bottom }}px {{ section.settings.padding_left }}px;
  }

  .newsletter-{{ section.id }} .newsletter__wrapper {
    max-width: {{ section.settings.content_width }}px;
    margin: 0 auto;
    display: flex;
    flex-direction: {{ section.settings.layout_direction }};
    align-items: center;
    gap: {{ section.settings.gap_between }}px;
  }

  .newsletter-{{ section.id }} .newsletter__content {
    flex: 1;
    padding: 2rem;
  }

  .newsletter-{{ section.id }} .newsletter__image-container {
    flex: 1;
    position: relative;
    overflow: hidden;
    border-radius: {{ section.settings.image_border_radius }}px;
  }

  .newsletter-{{ section.id }} .newsletter__image {
    width: 100%;
    height: auto;
    display: block;
    transition: transform 0.3s ease;
  }

  .newsletter-{{ section.id }} .newsletter__image:hover {
    transform: scale(1.03);
  }

  .newsletter-{{ section.id }} .newsletter__heading {
    font-size: {{ section.settings.heading_size }}px;
    margin-bottom: 1.5rem;
    line-height: 1.2;
  }

  .newsletter-{{ section.id }} .newsletter__subheading {
    font-size: {{ section.settings.subheading_size }}px;
    margin-bottom: 2rem;
    opacity: 0.9;
  }

  .newsletter-{{ section.id }} .newsletter-form {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    max-width: 500px;
  }

  .newsletter-{{ section.id }} .newsletter-form__field-wrapper {
    flex: 1;
    min-width: 200px;
  }

  .newsletter-{{ section.id }} .newsletter-form__field {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid {{ section.settings.input_border_color }};
    border-radius: {{ section.settings.input_border_radius }}px;
    background-color: {{ section.settings.input_background_color }};
    color: {{ section.settings.input_text_color }};
    font-size: 16px;
  }

  .newsletter-{{ section.id }} .newsletter-form__button {
    padding: 12px 30px;
    background-color: {{ section.settings.button_background_color }};
    color: {{ section.settings.button_text_color }};
    border: none;
    border-radius: {{ section.settings.button_border_radius }}px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 16px;
  }

  .newsletter-{{ section.id }} .newsletter-form__button:hover {
    background-color: {{ section.settings.button_hover_background_color }};
    transform: translateY(-2px);
  }

  @media screen and (max-width: 768px) {
    .newsletter-{{ section.id }} .newsletter__wrapper {
      flex-direction: column;
    }

    .newsletter-{{ section.id }} .newsletter__content,
    .newsletter-{{ section.id }} .newsletter__image-container {
      width: 100%;
    }

    .newsletter-{{ section.id }} {
      padding: {{ section.settings.mobile_padding_top }}px {{ section.settings.mobile_padding_right }}px {{ section.settings.mobile_padding_bottom }}px {{ section.settings.mobile_padding_left }}px;
    }
  }
{%- endstyle -%}

<div class="newsletter-{{ section.id }}">
  <div class="newsletter__wrapper">
    <div class="newsletter__content">
      {%- if section.settings.heading != blank -%}
        <h2 class="newsletter__heading">{{ section.settings.heading }}</h2>
      {%- endif -%}

      {%- if section.settings.subheading != blank -%}
        <div class="newsletter__subheading">{{ section.settings.subheading }}</div>
      {%- endif -%}

      {%- form 'customer', class: 'newsletter-form' -%}
        <input type="hidden" name="contact[tags]" value="newsletter">
        <div class="newsletter-form__field-wrapper">
          <input
            id="NewsletterForm--{{ section.id }}"
            type="email"
            name="contact[email]"
            class="newsletter-form__field"
            value="{{ form.email }}"
            aria-required="true"
            autocorrect="off"
            autocapitalize="off"
            autocomplete="email"
            {% if form.errors %}
              autofocus
              aria-invalid="true"
              aria-describedby="Newsletter-error--{{ section.id }}"
            {% elsif form.posted_successfully? %}
              aria-describedby="Newsletter-success--{{ section.id }}"
            {% endif %}
            placeholder="{{ section.settings.email_placeholder }}"
            required
          >
        </div>
        <button type="submit" class="newsletter-form__button" name="commit">
          {{ section.settings.button_label }}
        </button>
        {%- if form.errors -%}
          <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
            {%- render 'icon-error' -%}
            {{ form.errors.translated_fields.email | capitalize }}
            {{ form.errors.messages.email -}}
          </small>
        {%- endif -%}
      {%- endform -%}

      {%- if form.posted_successfully? -%}
        <h3
          class="newsletter-form__message newsletter-form__message--success form__message"
          id="Newsletter-success--{{ section.id }}"
          tabindex="-1"
          autofocus
        >
          {% render 'icon-success' -%}
          {{- 'newsletter.success' | t }}
        </h3>
      {%- endif -%}
    </div>

    <div class="newsletter__image-container">
      {%- if section.settings.image != blank -%}
        <img
          srcset="
            {%- if section.settings.image.width >= 375 -%}{{ section.settings.image | image_url: width: 375 }} 375w,{%- endif -%}
            {%- if section.settings.image.width >= 550 -%}{{ section.settings.image | image_url: width: 550 }} 550w,{%- endif -%}
            {%- if section.settings.image.width >= 750 -%}{{ section.settings.image | image_url: width: 750 }} 750w,{%- endif -%}
            {%- if section.settings.image.width >= 1100 -%}{{ section.settings.image | image_url: width: 1100 }} 1100w,{%- endif -%}
            {%- if section.settings.image.width >= 1500 -%}{{ section.settings.image | image_url: width: 1500 }} 1500w,{%- endif -%}
            {%- if section.settings.image.width >= 1780 -%}{{ section.settings.image | image_url: width: 1780 }} 1780w,{%- endif -%}
            {%- if section.settings.image.width >= 2000 -%}{{ section.settings.image | image_url: width: 2000 }} 2000w,{%- endif -%}
            {%- if section.settings.image.width >= 3000 -%}{{ section.settings.image | image_url: width: 3000 }} 3000w,{%- endif -%}
            {{ section.settings.image | image_url }} {{ section.settings.image.width }}w
          "
          src="{{ section.settings.image | image_url: width: 750 }}"
          sizes="(min-width: 750px) 50vw, 100vw"
          loading="lazy"
          class="newsletter__image"
          alt="{{ section.settings.image.alt | escape }}"
          width="{{ section.settings.image.width }}"
          height="{{ section.settings.image.width | divided_by: section.settings.image.aspect_ratio }}"
        >
      {%- else -%}
        {{ 'image' | placeholder_svg_tag: 'newsletter__image placeholder-svg' }}
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter with Image",
  "tag": "section",
  "class": "shopify-section--newsletter-with-image",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout_direction",
      "label": "Layout direction",
      "options": [
        {
          "value": "row",
          "label": "Newsletter left / Image right"
        },
        {
          "value": "row-reverse",
          "label": "Image left / Newsletter right"
        }
      ],
      "default": "row"
    },
    {
      "type": "range",
      "id": "content_width",
      "min": 800,
      "max": 1600,
      "step": 50,
      "unit": "px",
      "label": "Section max width",
      "default": 1200
    },
    {
      "type": "range",
      "id": "gap_between",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Gap between content and image",
      "default": 50
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "default": "Subscribe to our newsletter",
      "label": "Heading"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 60,
      "step": 1,
      "unit": "px",
      "label": "Heading font size",
      "default": 36
    },
    {
      "type": "richtext",
      "id": "subheading",
      "default": "<p>Be the first to know about new products, special offers, and more.</p>",
      "label": "Subheading"
    },
    {
      "type": "range",
      "id": "subheading_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subheading font size",
      "default": 18
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "default": "Your email address",
      "label": "Email placeholder text"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Subscribe",
      "label": "Button label"
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Image border radius",
      "default": 12
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f8f8f8"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "input_background_color",
      "label": "Input background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "input_text_color",
      "label": "Input text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "input_border_color",
      "label": "Input border color",
      "default": "#dddddd"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "Button background color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_background_color",
      "label": "Button hover background",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Input styling"
    },
    {
      "type": "range",
      "id": "input_border_radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Input border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Button border radius",
      "default": 4
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding top",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding bottom",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_left",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding left",
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_right",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding right",
      "default": 20
    },
    {
      "type": "header",
      "content": "Mobile spacing"
    },
    {
      "type": "range",
      "id": "mobile_padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Mobile padding top",
      "default": 30
    },
    {
      "type": "range",
      "id": "mobile_padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Mobile padding bottom",
      "default": 30
    },
    {
      "type": "range",
      "id": "mobile_padding_left",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Mobile padding left",
      "default": 15
    },
    {
      "type": "range",
      "id": "mobile_padding_right",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Mobile padding right",
      "default": 15
    }
  ],
  "presets": [
    {
      "name": "Newsletter with Image",
      "category": "Promotional"
    }
  ]
}
{% endschema %}
